jQuery(function(){function s(s){return s.replace(/^\s+/,"").replace(/\s+$/,"")}[].indexOf||(Array.prototype.indexOf=function(s){for(var t=-1,a=0;a<this.length;a++)if(s===this[a]){t=a;break}return t},Array.prototype.lastIndexOf=function(s){for(var t=-1,a=this.length-1;a>-1;a--)if(s===this[a]){t=a;break}return t});var t=function(s,t){this.target=jQuery(s),this.content=t,this.install()};t.prototype.splits=function(){var s=this.content.split("\n");this.lines=[];for(var t=0;t<s.length;t++)this.lines.push(this.language(s[t]));this.target.html("<ol>"+this.lines.join("")+"</ol>")},t.prototype.condition=function(s){for(var t="",a=["<",">","=","&",";","|","(",")","[","]",":","~",",","+","-","%","*","/","!"],n=0;n<s.length;n++){var e=s.charAt(n);t+=a.indexOf(e)>-1?'<span class="sytax-key">'+e+"</span>":e}return t=t.replace(/(v)\_([^\s\<\>\=\&\;\|\(\)\[\]\:\~\,\+\-\%\*\/\!]+)/gi,'<span class="sytax-condition">$1_$2</span>')},t.prototype.params=function(s){return s.replace(/v\_([^\s\<\>\=\&\;\|\(\)\[\]\:\~\,\+\-\%\*\/\!]+)/,'<span class="sytax-param">v_$1</span>').replace(/\,/g,'<span class="sytax-key">,</span>').replace(/(tip)(\_\d)?\:/gi,'<span class="sytax-key">$1$2:</span>').replace(/(icon)(\_\d)?\:/gi,'<span class="sytax-key">$1$2:</span>')},t.prototype.language=function(t){if(!/^\#/.test(s(t))){var a=t.indexOf("--"),n="";a>-1&&(n=t.substring(a),t=t.substring(0,a),0===s(t).length&&(t=n,n="",0===s(t).length&&(t="")))}var e=s(t),i="",r=this;if(/^\#/.test(e)){var p=/(\s+)?#([^\s]+)\s(.+)/.exec(t),o=p[1]?p[1]:"",l=p[2],c=p[3];i+="<li><pre>"+o+'<span class="sytax-system sytax-system-'+l.toLowerCase()+'">#'+l+'</span> <span class="sytax-system-string">'+r.params(c)+"</span></pre></li>"}else if(/^\-\-/.test(e))i+='<li><pre><span class="sytax-comment">'+t+"</span></pre></li>";else{var y=/(\s+)?\/([^\s\[]+)(\s?\[([^\]]+)\])?(\s?(.+))?/.exec(t);if(y){var h=y[1]?y[1]:"",f=y[2],u=y[4],x=y[6];i+="<li><pre>",i+=h,i+='<span class="sytax-keyword sytax-keyword-'+f.toLowerCase()+'">/'+f+"</span>",y[3]&&(i+=" ",i+='<span class="sytax-key">[</span>',i+='<span class="sytax-condition">'+r.condition(u)+"</span>",i+='<span class="sytax-key">]</span>'),y[5]&&(i+=" ",i+='<span class="sytax-skill-name">'+r.condition(x)+"</span>"),n&&n.length>0&&(i+=" ",i+='<span class="sytax-comment">'+n+"</span>"),i+="</pre></li>"}else i+="<li><pre>"+t+(n&&n.length>0?n:"")+"</pre></li>"}return i},t.prototype.install=function(){this.splits()},window.macro=macro=t}),jQuery(function(s){var t="e-macro";s("."+t).each(function(){var t='<div class="u-tobevip">本帖隐藏内容需<a href="http://www.jx3pve.com/forum.php?mod=post&action=reply&fid='+fid+"&tid="+tid+'">回复</a>，加入 <a class="u-vip" href="./vip" target="_blank"><i></i>VIP会员</a> 享受无需回复查看隐藏内容、无限制下载、免广告极速等多项特权。</div>',a=this.textContent||this.innerText;a=s.trim(a),-1===a.indexOf("回复可见")?new macro(this,a):s(this).html(t)})});