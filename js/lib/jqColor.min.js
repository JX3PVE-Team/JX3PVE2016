!function(o,e){o.fn.extend({colorPicker:function(r){var i=function(e,r){var i=this,t=o(i.input),c=o(i.patch),n=e.RND.rgb,a=e.RND.hsl,s=i.isIE8?(e.alpha<.16?"0":"")+Math.round(100*e.alpha).toString(16).toUpperCase()+e.HEX:"",l=n.r+", "+n.g+", "+n.b,d="rgba("+l+", "+e.alpha+")",p=1!==e.alpha&&!i.isIE8,u=t.data("colorMode");c.css({color:e.rgbaMixCustom.luminance>.22?"#222":"#ddd","background-color":d,filter:i.isIE8?"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+s+",endColorstr=#"+s+")":""}),t.val("HEX"!==u||p?"rgb"===u||"HEX"===u&&p?p?d:"rgb("+l+")":"hsl"+(p?"a(":"(")+a.h+", "+a.s+"%, "+a.l+"%"+(p?", "+e.alpha:"")+")":"#"+(i.isIE8?s:e.HEX)),i.displayCallback&&i.displayCallback(e,r,i)},t=function(o){return o.value||o.getAttribute("value")||o.style.backgroundColor||"#FFFFFF"},c=function(e,r){var i=this,t=l.current;if("toMemery"===r){for(var c,n=t.nodes.memos,a="",s=0,d=[],p=0,u=n.length;u>p;p++)c=o(n[p]),a=c.css("background-color"),s=Math.round(100*c.css("opacity"))/100,d.push(a.replace(/, /g,",").replace("rgb(","rgba(").replace(")",","+s+")"));d="'"+d.join("','")+"'",o.docCookies("colorPickerMemos"+(i.noAlpha?"NoAlpha":""),d)}else if("resizeApp"===r)o.docCookies("colorPickerSize",t.color.options.currentSize);else if("modeChange"===r){var f=t.color.options.mode;o.docCookies("colorPickerMode",f.type+"-"+f.z)}},n=function(r,n){var a={klass:e.ColorPicker,input:r,patch:r,isIE8:!!document.all&&!document.addEventListener,animationSpeed:200,draggable:!0,margin:{left:-1,top:2},customBG:"#FFFFFF",color:t(r),initStyle:"display: none",mode:o.docCookies("colorPickerMode")||"hsv-h",memoryColors:o.docCookies("colorPickerMemos"+((n||{}).noAlpha?"NoAlpha":"")),size:o.docCookies("colorPickerSize")||1,renderCallback:i,actionCallback:c};for(var s in n)a[s]=n[s];return new a.klass(a)},a=function(i,c,a){var d=a?"off":"on";o(i)[d]("focus.colorPicker",function(){var e=o(this),a=e.offset(),d=c?o(s).index(this):0,p=l[d]||(l[d]=n(this,r)),u=p.color.options,f=o.ui&&u.draggable?o(p.nodes.colorPicker).draggable({cancel:"."+u.CSSPrefix+"app div"}):o(p.nodes.colorPicker);u.color=t(i),f.css({position:"absolute",left:a.left+u.margin.left,top:a.top+ +e.outerHeight(!0)+u.margin.top}),c||(u.input=i,u.patch=i,p.setColor(t(i),void 0,void 0,!0),p.saveAsBackground()),l.current=l[d],o(u.appendTo||document.body).append(f),setTimeout(function(){f.show(p.color.options.animationSpeed)},0)}),o(e)[d]("mousedown.colorPicker",function(e){var r=l.current,i=o(r?r.nodes.colorPicker:void 0),t=r?r.color.options.animationSpeed:0,c=o(e.target).closest(".cp-app")[0],n=o(s).index(e.target);c&&r&&o(l).index(c)?e.target===r.nodes.exit&&(i.hide(t),o(":focus").trigger("blur")):-1!==n||i.hide(t)})},s=this,l=o.fn.colorPicker.colorPickers||[],d=new e.Colors({customBG:r&&r.customBG||"#FFFFFF",allMixDetails:!0});return o.fn.colorPicker.colorPickers=l,o(this).each(function(i,c){if(o(c).off(".colorPicker"),o(e).off(".colorPicker"),"destroy"!==r){var n=t(c),s=n.split("(");o(c).data("colorMode",s[1]?s[0].substr(0,3):"HEX"),a(c,r&&r.multipleInstances,!1),r&&r.readOnly&&(c.readOnly=!0),d.setColor(n),r&&r.init&&r.init(c,d.colors)}}),this}}),o.docCookies=function(o,e,r){var i,t,c,n,a=encodeURIComponent,s=decodeURIComponent,l={};if(void 0===e){for(i=document.cookie.split("; ")||[],t=i.length;t--;)c=i[t].split("="),c[0]&&(l[s(c.shift())]=s(c.join("=")));return o?l[o]:l}r=r||{},(""===e||r.expires<0)&&(r.expires=-1),void 0!==r.expires&&(n=new Date,n.setDate(n.getDate()+r.expires)),document.cookie=a(o)+"="+a(e)+(n?"; expires="+n.toUTCString():"")+(r.path?"; path="+r.path:"")+(r.domain?"; domain="+r.domain:"")+(r.secure?"; secure":"")}}(jQuery,this);